schema: '2.0'
stages:
  split_data:
    cmd: python src/data_split/split_data.py
    deps:
    - path: data/raw/flights.csv
      hash: md5
      md5: df18a038826769e5ce870aa7934facfc
      size: 24570411
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_split/split_data.py
      hash: md5
      md5: facaf4c7d2fdcd4ae02d5d52f514444e
      size: 3258
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
    outs:
    - path: data/raw/train_validation_test/test.csv
      hash: md5
      md5: dfa25b636af1f48bc9d1985dcadc324e
      size: 3650705
    - path: data/raw/train_validation_test/train.csv
      hash: md5
      md5: c913f2a2f5394eba3d96badf8c07ea29
      size: 17002301
    - path: data/raw/train_validation_test/validation.csv
      hash: md5
      md5: 035f4539e18954eaca370c6a5c06723a
      size: 3645658
  bronze_pipeline@train:
    cmd: python src/pipelines/bronze_pipeline.py train.csv
    deps:
    - path: data/raw/train_validation_test/train.csv
      hash: md5
      md5: c913f2a2f5394eba3d96badf8c07ea29
      size: 17002301
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_validation/expectations/bronze_expectations.py
      hash: md5
      md5: 8d7a1a77c5fbc8f2c312a09ca12b765f
      size: 4212
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/bronze_pipeline.py
      hash: md5
      md5: ed0a3004aa721f10a12f445ae5759397
      size: 5132
    - path: src/shared/config/config_bronze.py
      hash: md5
      md5: 910da23f93b83eba07d7c16a44a17b36
      size: 676
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
    outs:
    - path: data/bronze_data/processed/train.csv
      hash: md5
      md5: c913f2a2f5394eba3d96badf8c07ea29
      size: 17002301
  bronze_pipeline@validation:
    cmd: python src/pipelines/bronze_pipeline.py validation.csv
    deps:
    - path: data/raw/train_validation_test/validation.csv
      hash: md5
      md5: 035f4539e18954eaca370c6a5c06723a
      size: 3645658
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_validation/expectations/bronze_expectations.py
      hash: md5
      md5: 8d7a1a77c5fbc8f2c312a09ca12b765f
      size: 4212
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/bronze_pipeline.py
      hash: md5
      md5: ed0a3004aa721f10a12f445ae5759397
      size: 5132
    - path: src/shared/config/config_bronze.py
      hash: md5
      md5: 910da23f93b83eba07d7c16a44a17b36
      size: 676
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
    outs:
    - path: data/bronze_data/processed/validation.csv
      hash: md5
      md5: 035f4539e18954eaca370c6a5c06723a
      size: 3645658
  bronze_pipeline@test:
    cmd: python src/pipelines/bronze_pipeline.py test.csv
    deps:
    - path: data/raw/train_validation_test/test.csv
      hash: md5
      md5: dfa25b636af1f48bc9d1985dcadc324e
      size: 3650705
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_validation/expectations/bronze_expectations.py
      hash: md5
      md5: 8d7a1a77c5fbc8f2c312a09ca12b765f
      size: 4212
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/bronze_pipeline.py
      hash: md5
      md5: ed0a3004aa721f10a12f445ae5759397
      size: 5132
    - path: src/shared/config/config_bronze.py
      hash: md5
      md5: 910da23f93b83eba07d7c16a44a17b36
      size: 676
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
    outs:
    - path: data/bronze_data/processed/test.csv
      hash: md5
      md5: dfa25b636af1f48bc9d1985dcadc324e
      size: 3650705
  silver_pipeline@train:
    cmd: python src/pipelines/silver_pipeline.py train.csv
    deps:
    - path: data/bronze_data/processed/train.csv
      hash: md5
      md5: c913f2a2f5394eba3d96badf8c07ea29
      size: 17002301
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_validation/expectations/silver_expectations.py
      hash: md5
      md5: 5c6c120c4c73b6efd935a2819f074d83
      size: 3333
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/silver_pipeline.py
      hash: md5
      md5: 498dffec96b41270d202b0a9067f107a
      size: 5581
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/config/config_silver.py
      hash: md5
      md5: d6149d100fe4e997932daf0ae03b2b74
      size: 1957
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
    - path: src/silver_data_preprocessing/
      hash: md5
      md5: 01b0da1d742ba2a88b1a46d6a5596646.dir
      size: 18729
      nfiles: 4
    outs:
    - path: data/silver_data/processed/train.parquet
      hash: md5
      md5: 9c04839d67de437d7ca6b1c6bd4523fa
      size: 1866293
  silver_pipeline@validation:
    cmd: python src/pipelines/silver_pipeline.py validation.csv
    deps:
    - path: data/bronze_data/processed/validation.csv
      hash: md5
      md5: 035f4539e18954eaca370c6a5c06723a
      size: 3645658
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_validation/expectations/silver_expectations.py
      hash: md5
      md5: 5c6c120c4c73b6efd935a2819f074d83
      size: 3333
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/silver_pipeline.py
      hash: md5
      md5: 498dffec96b41270d202b0a9067f107a
      size: 5581
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/config/config_silver.py
      hash: md5
      md5: d6149d100fe4e997932daf0ae03b2b74
      size: 1957
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
    - path: src/silver_data_preprocessing/
      hash: md5
      md5: 01b0da1d742ba2a88b1a46d6a5596646.dir
      size: 18729
      nfiles: 4
    outs:
    - path: data/silver_data/processed/validation.parquet
      hash: md5
      md5: 4ab1e09c3bfe882e9a34dcd9438a0ed3
      size: 399605
  silver_pipeline@test:
    cmd: python src/pipelines/silver_pipeline.py test.csv
    deps:
    - path: data/bronze_data/processed/test.csv
      hash: md5
      md5: dfa25b636af1f48bc9d1985dcadc324e
      size: 3650705
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_validation/expectations/silver_expectations.py
      hash: md5
      md5: 5c6c120c4c73b6efd935a2819f074d83
      size: 3333
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/silver_pipeline.py
      hash: md5
      md5: 498dffec96b41270d202b0a9067f107a
      size: 5581
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/config/config_silver.py
      hash: md5
      md5: d6149d100fe4e997932daf0ae03b2b74
      size: 1957
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
    - path: src/silver_data_preprocessing/
      hash: md5
      md5: 01b0da1d742ba2a88b1a46d6a5596646.dir
      size: 18729
      nfiles: 4
    outs:
    - path: data/silver_data/processed/test.parquet
      hash: md5
      md5: 9c564881e84853faad55461550b362ac
      size: 402967
  gold_pipeline:
    cmd: python src/pipelines/gold_pipeline.py
    deps:
    - path: data/silver_data/processed/test.parquet
      hash: md5
      md5: 9c564881e84853faad55461550b362ac
      size: 402967
    - path: data/silver_data/processed/train.parquet
      hash: md5
      md5: 9c04839d67de437d7ca6b1c6bd4523fa
      size: 1866293
    - path: data/silver_data/processed/validation.parquet
      hash: md5
      md5: 4ab1e09c3bfe882e9a34dcd9438a0ed3
      size: 399605
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_validation/expectations/gold_expectations.py
      hash: md5
      md5: e923a381831881b63a5774f7636c6c53
      size: 5485
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/gold_data_preprocessing/
      hash: md5
      md5: 03806a9900cb73cbcba415d2dd01124e.dir
      size: 123930
      nfiles: 18
    - path: src/pipelines/gold_pipeline.py
      hash: md5
      md5: ed5db5b8020dc2ad6d0e961ff17eb873
      size: 15007
    - path: src/shared/config/config_gold.py
      hash: md5
      md5: df04b2c0c7484ad0425bbaabb524ba02
      size: 6127
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
    params:
      params.yaml:
        gold_pipeline.imputation:
          median:
          - price
          - time
          - distance
          mode:
          - agency
          - flight_type
          constant:
            from_location: Unknown
            to_location: Unknown
        gold_pipeline.outlier_handling:
          detection_strategy: iqr
          handling_strategy: trim
        gold_pipeline.power_transformer:
        gold_pipeline.rare_category_grouping:
    outs:
    - path: data/gold_engineered_data/processed/test.parquet
      hash: md5
      md5: 1f371bcbd675421db66b7bf6af4c23e4
      size: 140051
    - path: data/gold_engineered_data/processed/train.parquet
      hash: md5
      md5: 780994c70990c2ab5b6e69e1367f31a1
      size: 410174
    - path: data/gold_engineered_data/processed/validation.parquet
      hash: md5
      md5: 3cde27b5d6415ce2b7ad32746ed417e7
      size: 118720
    - path: models/categorical_encoder.joblib
      hash: md5
      md5: e9179cd4150d5db392ef62630e7f69cf
      size: 4166
    - path: models/gold_final_columns.json
      hash: md5
      md5: 560fd944b763c6ac791f5cac8c1935d4
      size: 180
    - path: models/simple_imputer.json
      hash: md5
      md5: 4a939e5d5a7cfb3346567524080f6b6d
      size: 219
  training_pipeline:
    cmd: python src/pipelines/training_pipeline.py train.parquet 
      validation.parquet --test_file_name test.parquet
    deps:
    - path: data/gold_engineered_data/processed/train.parquet
      hash: md5
      md5: 780994c70990c2ab5b6e69e1367f31a1
      size: 410174
    - path: data/gold_engineered_data/processed/validation.parquet
      hash: md5
      md5: 3cde27b5d6415ce2b7ad32746ed417e7
      size: 118720
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/gold_data_preprocessing/power_transformer.py
      hash: md5
      md5: a778cc5db54c7bb66dba5ec1189ebb24
      size: 9194
    - path: src/gold_data_preprocessing/scaler.py
      hash: md5
      md5: 5d5556bf996e92c8f043ccae39f732bf
      size: 7936
    - path: src/model_evaluation/evaluation.py
      hash: md5
      md5: 451518fddd14f3f2c5fa1b848059f14c
      size: 5507
    - path: src/model_training/train.py
      hash: md5
      md5: 54a9b674b335d3aae0da56432bf8078e
      size: 2724
    - path: src/pipelines/training_pipeline.py
      hash: md5
      md5: e82958d6f9a224b7474b079670d45849
      size: 26225
    - path: src/shared/config/config_gold.py
      hash: md5
      md5: df04b2c0c7484ad0425bbaabb524ba02
      size: 6127
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/config/config_training.py
      hash: md5
      md5: 07ddab748239700a869fb1592b25a702
      size: 1205
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
    params:
      params.yaml:
        mlflow_params:
          experiment_name: test-runs
        training_pipeline:
          model_config_to_run: LGBMRegressor
          models:
            LinearRegression:
              model_class: LinearRegression
              name: LinearRegression_Base
              run_name: LR_Base
              log_model_artifact: false
              register_model: false
              log_predictions: false
              log_interpretability_artifacts: true
              log_plots: true
              evaluate_on_test_set: false
              drop_multicollinear_cols:
              - time
              training_params:
                n_jobs: -1
                fit_intercept: true
              train_model_only: false
              cross_validation:
                enabled: true
                n_splits: 5
            Ridge:
              model_class: Ridge
              name: Ridge_Tuned
              run_name: Ridge_Base
              log_model_artifact: true
              register_model: false
              log_predictions: true
              log_interpretability_artifacts: true
              log_plots: true
              evaluate_on_test_set: false
              drop_multicollinear_cols:
              - time
              training_params:
                alpha: 1.0
                fit_intercept: true
                solver: auto
                random_state: 42
              train_model_only: false
              cross_validation:
                enabled: true
                n_splits: 5
            Lasso:
              model_class: Lasso
              name: Lasso_Tuned
              run_name: Lasso_Base
              log_model_artifact: true
              register_model: false
              log_predictions: true
              log_interpretability_artifacts: true
              log_plots: true
              evaluate_on_test_set: false
              drop_multicollinear_cols:
              - time
              training_params:
                alpha: 1.0
                fit_intercept: true
                selection: cyclic
                random_state: 42
              train_model_only: false
              cross_validation:
                enabled: true
                n_splits: 5
            ElasticNet:
              model_class: ElasticNet
              name: ElasticNet_Tuned
              run_name: ElasticNet_Base
              log_model_artifact: true
              register_model: false
              log_predictions: true
              log_interpretability_artifacts: true
              log_plots: true
              evaluate_on_test_set: false
              drop_multicollinear_cols:
              - time
              training_params:
                alpha: 1.0
                l1_ratio: 0.5
                fit_intercept: true
                selection: cyclic
                random_state: 42
              train_model_only: false
              cross_validation:
                enabled: true
                n_splits: 5
            RandomForestRegressor:
              model_class: RandomForestRegressor
              name: RFR_Best
              run_name: RFR_Test
              log_model_artifact: false
              register_model: false
              log_predictions: true
              log_interpretability_artifacts: true
              log_plots: true
              evaluate_on_test_set: true
              drop_multicollinear_cols: []
              training_params:
                n_estimators: 600
                max_depth: 14
                min_samples_split: 16
                min_samples_leaf: 4
                max_features: 0.5062662102018453
                random_state: 42
                n_jobs: -1
              train_model_only: true
              cross_validation:
                enabled: false
                n_splits: 5
            XGBRegressor:
              model_class: XGBRegressor
              name: XGBR_Best
              run_name: XGBR_CV
              log_model_artifact: false
              register_model: false
              log_predictions: false
              log_interpretability_artifacts: true
              log_plots: true
              log_shap_plots: true
              evaluate_on_test_set: false
              drop_multicollinear_cols: []
              training_params:
                n_estimators: 1100
                learning_rate: 0.064
                max_depth: 12
                subsample: 0.8484233884504717
                colsample_bytree: 0.6535905760097056
                gamma: 0.5111157004979503
                reg_alpha: 8.325147849527994e-06
                reg_lambda: 1.035392577097126e-08
                random_state: 42
                n_jobs: -1
              train_model_only: false
              cross_validation:
                enabled: true
                n_splits: 5
            LGBMRegressor:
              model_class: LGBMRegressor
              name: LGBMR_Best
              run_name: LGBMR_Champion
              log_model_artifact: false
              register_model: false
              log_predictions: false
              log_interpretability_artifacts: false
              log_plots: false
              log_shap_plots: false
              drop_multicollinear_cols: []
              training_params:
                n_estimators: 700
                learning_rate: 0.16627974464599812
                num_leaves: 15
                max_depth: 5
                subsample: 0.8337243366457066
                colsample_bytree: 0.6144913771873575
                reg_alpha: 4.999937468073592e-05
                reg_lambda: 0.33053572287139826
                random_state: 42
                n_jobs: -1
                verbose: -1
              cross_validation:
                enabled: false
                n_splits: 5
              train_model_only: true
              evaluate_on_test_set: true
            SGDRegressor:
              model_class: SGDRegressor
              name: SGD_Tuned
              run_name: SGDRegressor_Tuned
              log_model_artifact: true
              register_model: false
              log_predictions: true
              log_interpretability_artifacts: true
              log_plots: true
              evaluate_on_test_set: false
              drop_multicollinear_cols:
              - time
              training_params:
                loss: squared_error
                penalty: l2
                alpha: 0.0001
                max_iter: 1000
                random_state: 42
              train_model_only: false
              cross_validation:
                enabled: true
                n_splits: 5
            SVR:
              model_class: SVR
              name: SVR_Tuned
              run_name: SVR_Tuned
              log_model_artifact: true
              register_model: false
              log_predictions: true
              log_interpretability_artifacts: true
              log_plots: true
              evaluate_on_test_set: false
              drop_multicollinear_cols: []
              training_params:
                kernel: rbf
                C: 1.0
                gamma: scale
                epsilon: 0.1
              train_model_only: false
              cross_validation:
                enabled: true
                n_splits: 5
  bronze_processing@train:
    cmd: python src/pipelines/bronze_pipeline.py train.csv
    deps:
    - path: data/raw/train_validation_test
      hash: md5
      md5: 71f268960938259e98e4a9c5ec99c3a1.dir
      size: 24298664
      nfiles: 3
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_validation/expectations/bronze_expectations.py
      hash: md5
      md5: 8d7a1a77c5fbc8f2c312a09ca12b765f
      size: 4212
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/bronze_pipeline.py
      hash: md5
      md5: ed0a3004aa721f10a12f445ae5759397
      size: 5132
    - path: src/shared/config/config_bronze.py
      hash: md5
      md5: 910da23f93b83eba07d7c16a44a17b36
      size: 676
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
  bronze_processing@validation:
    cmd: python src/pipelines/bronze_pipeline.py validation.csv
    deps:
    - path: data/raw/train_validation_test
      hash: md5
      md5: 71f268960938259e98e4a9c5ec99c3a1.dir
      size: 24298664
      nfiles: 3
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_validation/expectations/bronze_expectations.py
      hash: md5
      md5: 8d7a1a77c5fbc8f2c312a09ca12b765f
      size: 4212
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/bronze_pipeline.py
      hash: md5
      md5: ed0a3004aa721f10a12f445ae5759397
      size: 5132
    - path: src/shared/config/config_bronze.py
      hash: md5
      md5: 910da23f93b83eba07d7c16a44a17b36
      size: 676
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
  bronze_processing@test:
    cmd: python src/pipelines/bronze_pipeline.py test.csv
    deps:
    - path: data/raw/train_validation_test
      hash: md5
      md5: 71f268960938259e98e4a9c5ec99c3a1.dir
      size: 24298664
      nfiles: 3
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_validation/expectations/bronze_expectations.py
      hash: md5
      md5: 8d7a1a77c5fbc8f2c312a09ca12b765f
      size: 4212
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/bronze_pipeline.py
      hash: md5
      md5: ed0a3004aa721f10a12f445ae5759397
      size: 5132
    - path: src/shared/config/config_bronze.py
      hash: md5
      md5: 910da23f93b83eba07d7c16a44a17b36
      size: 676
    - path: src/shared/config/config_logging.py
      hash: md5
      md5: c2d19f4f0498b43b19929eebc863e690
      size: 520
    - path: src/shared/utils.py
      hash: md5
      md5: 8a7b7e80c76b5e65f29c70b402b8cad2
      size: 5299
