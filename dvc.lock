schema: '2.0'
stages:
  split_data:
    cmd: python src/data_split/split_data.py
    deps:
    - path: data/raw/flights.csv
      hash: md5
      md5: df18a038826769e5ce870aa7934facfc
      size: 24570411
    - path: src/data_ingestion/data_loader.py
      hash: md5
      md5: fc8d34e7fc64691d0f633c8752b51254
      size: 4344
    - path: src/data_split/split_data.py
      hash: md5
      md5: facaf4c7d2fdcd4ae02d5d52f514444e
      size: 3258
    - path: src/shared/
      hash: md5
      md5: 0ea1ec6c7a9c0232b6589aa7c9160825.dir
      size: 39960
      nfiles: 22
    outs:
    - path: data/raw/train_validation_test/test.csv
      hash: md5
      md5: dfa25b636af1f48bc9d1985dcadc324e
      size: 3650705
    - path: data/raw/train_validation_test/train.csv
      hash: md5
      md5: c913f2a2f5394eba3d96badf8c07ea29
      size: 17002301
    - path: data/raw/train_validation_test/validation.csv
      hash: md5
      md5: 035f4539e18954eaca370c6a5c06723a
      size: 3645658
  bronze_pipeline@train:
    cmd: python src/pipelines/bronze_pipeline.py train.csv
    deps:
    - path: data/raw/train_validation_test/train.csv
      hash: md5
      md5: c913f2a2f5394eba3d96badf8c07ea29
      size: 17002301
    - path: src/data_validation/expectations/bronze_expectations.py
      hash: md5
      md5: 8d7a1a77c5fbc8f2c312a09ca12b765f
      size: 4212
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/bronze_pipeline.py
      hash: md5
      md5: 461f7f20b6b83cfc53910d31b594484d
      size: 5125
    - path: src/shared/
      hash: md5
      md5: 0ea1ec6c7a9c0232b6589aa7c9160825.dir
      size: 39960
      nfiles: 22
    outs:
    - path: data/bronze_data/processed/train.csv
      hash: md5
      md5: c913f2a2f5394eba3d96badf8c07ea29
      size: 17002301
  bronze_pipeline@validation:
    cmd: python src/pipelines/bronze_pipeline.py validation.csv
    deps:
    - path: data/raw/train_validation_test/validation.csv
      hash: md5
      md5: 035f4539e18954eaca370c6a5c06723a
      size: 3645658
    - path: src/data_validation/expectations/bronze_expectations.py
      hash: md5
      md5: 8d7a1a77c5fbc8f2c312a09ca12b765f
      size: 4212
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/bronze_pipeline.py
      hash: md5
      md5: 461f7f20b6b83cfc53910d31b594484d
      size: 5125
    - path: src/shared/
      hash: md5
      md5: 0ea1ec6c7a9c0232b6589aa7c9160825.dir
      size: 39960
      nfiles: 22
    outs:
    - path: data/bronze_data/processed/validation.csv
      hash: md5
      md5: 035f4539e18954eaca370c6a5c06723a
      size: 3645658
  bronze_pipeline@test:
    cmd: python src/pipelines/bronze_pipeline.py test.csv
    deps:
    - path: data/raw/train_validation_test/test.csv
      hash: md5
      md5: dfa25b636af1f48bc9d1985dcadc324e
      size: 3650705
    - path: src/data_validation/expectations/bronze_expectations.py
      hash: md5
      md5: 8d7a1a77c5fbc8f2c312a09ca12b765f
      size: 4212
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/bronze_pipeline.py
      hash: md5
      md5: 461f7f20b6b83cfc53910d31b594484d
      size: 5125
    - path: src/shared/
      hash: md5
      md5: 0ea1ec6c7a9c0232b6589aa7c9160825.dir
      size: 39960
      nfiles: 22
    outs:
    - path: data/bronze_data/processed/test.csv
      hash: md5
      md5: dfa25b636af1f48bc9d1985dcadc324e
      size: 3650705
  silver_pipeline@train:
    cmd: python src/pipelines/silver_pipeline.py train.csv
    deps:
    - path: data/bronze_data/processed/train.csv
      hash: md5
      md5: c913f2a2f5394eba3d96badf8c07ea29
      size: 17002301
    - path: src/data_ingestion/
      hash: md5
      md5: 2661bcb446d210975f34885f7df6f7de.dir
      size: 10498
      nfiles: 4
    - path: src/data_validation/expectations/silver_expectations.py
      hash: md5
      md5: 5c6c120c4c73b6efd935a2819f074d83
      size: 3333
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/silver_pipeline.py
      hash: md5
      md5: 488cd73a306688ae48c373ca8ed0d2fc
      size: 5574
    - path: src/shared/
      hash: md5
      md5: 0ea1ec6c7a9c0232b6589aa7c9160825.dir
      size: 39960
      nfiles: 22
    - path: src/silver_data_preprocessing/
      hash: md5
      md5: e16891d34a4612ce47d1462b36b6dfb1.dir
      size: 18729
      nfiles: 4
    outs:
    - path: data/silver_data/processed/train.parquet
      hash: md5
      md5: 9c04839d67de437d7ca6b1c6bd4523fa
      size: 1866293
  silver_pipeline@validation:
    cmd: python src/pipelines/silver_pipeline.py validation.csv
    deps:
    - path: data/bronze_data/processed/validation.csv
      hash: md5
      md5: 035f4539e18954eaca370c6a5c06723a
      size: 3645658
    - path: src/data_ingestion/
      hash: md5
      md5: 2661bcb446d210975f34885f7df6f7de.dir
      size: 10498
      nfiles: 4
    - path: src/data_validation/expectations/silver_expectations.py
      hash: md5
      md5: 5c6c120c4c73b6efd935a2819f074d83
      size: 3333
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/silver_pipeline.py
      hash: md5
      md5: 488cd73a306688ae48c373ca8ed0d2fc
      size: 5574
    - path: src/shared/
      hash: md5
      md5: 0ea1ec6c7a9c0232b6589aa7c9160825.dir
      size: 39960
      nfiles: 22
    - path: src/silver_data_preprocessing/
      hash: md5
      md5: e16891d34a4612ce47d1462b36b6dfb1.dir
      size: 18729
      nfiles: 4
    outs:
    - path: data/silver_data/processed/validation.parquet
      hash: md5
      md5: 4ab1e09c3bfe882e9a34dcd9438a0ed3
      size: 399605
  silver_pipeline@test:
    cmd: python src/pipelines/silver_pipeline.py test.csv
    deps:
    - path: data/bronze_data/processed/test.csv
      hash: md5
      md5: dfa25b636af1f48bc9d1985dcadc324e
      size: 3650705
    - path: src/data_ingestion/
      hash: md5
      md5: 2661bcb446d210975f34885f7df6f7de.dir
      size: 10498
      nfiles: 4
    - path: src/data_validation/expectations/silver_expectations.py
      hash: md5
      md5: 5c6c120c4c73b6efd935a2819f074d83
      size: 3333
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/pipelines/silver_pipeline.py
      hash: md5
      md5: 488cd73a306688ae48c373ca8ed0d2fc
      size: 5574
    - path: src/shared/
      hash: md5
      md5: 0ea1ec6c7a9c0232b6589aa7c9160825.dir
      size: 39960
      nfiles: 22
    - path: src/silver_data_preprocessing/
      hash: md5
      md5: e16891d34a4612ce47d1462b36b6dfb1.dir
      size: 18729
      nfiles: 4
    outs:
    - path: data/silver_data/processed/test.parquet
      hash: md5
      md5: 9c564881e84853faad55461550b362ac
      size: 402967
  gold_pipeline:
    cmd: python src/pipelines/gold_pipeline.py
    deps:
    - path: data/silver_data/processed/test.parquet
      hash: md5
      md5: 9c564881e84853faad55461550b362ac
      size: 402967
    - path: data/silver_data/processed/train.parquet
      hash: md5
      md5: 9c04839d67de437d7ca6b1c6bd4523fa
      size: 1866293
    - path: data/silver_data/processed/validation.parquet
      hash: md5
      md5: 4ab1e09c3bfe882e9a34dcd9438a0ed3
      size: 399605
    - path: src/data_ingestion/
      hash: md5
      md5: 2661bcb446d210975f34885f7df6f7de.dir
      size: 10498
      nfiles: 4
    - path: src/data_validation/expectations/gold_expectations.py
      hash: md5
      md5: 9ad9ba114b3691686ba918328dca87cc
      size: 5253
    - path: src/data_validation/ge_components.py
      hash: md5
      md5: 312a7b57f107e84894946050b1d80206
      size: 13316
    - path: src/gold_data_preprocessing/
      hash: md5
      md5: 57c6618a91974950ea4ecb723f2b0328.dir
      size: 113943
      nfiles: 19
    - path: src/pipelines/gold_pipeline.py
      hash: md5
      md5: 35e707ca947d4d94fa012241aec393c0
      size: 12567
    - path: src/shared/
      hash: md5
      md5: 0ea1ec6c7a9c0232b6589aa7c9160825.dir
      size: 39960
      nfiles: 22
    params:
      params.yaml:
        gold_pipeline.imputation:
          median:
          - price
          - time
          - distance
          mode:
          - agency
          - flight_type
          constant:
            from_location: Unknown
            to_location: Unknown
        gold_pipeline.outlier_handling:
          detection_strategy: iqr
          handling_strategy: trim
          iso_forest_contamination: 0.01
        gold_pipeline.power_transformer:
          strategy: yeo-johnson
        gold_pipeline.rare_category_grouping:
          cardinality_threshold: 0.01
    outs:
    - path: data/gold_engineered_data/processed/test.parquet
      hash: md5
      md5: 275f192547ba0466cd34cf1b7d092b62
      size: 374839
    - path: data/gold_engineered_data/processed/train.parquet
      hash: md5
      md5: 5b530a739e4ed1e624cc2dac3829888e
      size: 961853
    - path: data/gold_engineered_data/processed/validation.parquet
      hash: md5
      md5: c247566a0d15ed3c1a52f5f77666fb79
      size: 331314
    - path: models/categorical_encoder.joblib
      hash: md5
      md5: ca5ee8bcc97f01d335c9cf0231283ad7
      size: 7292
    - path: models/gold_final_columns.json
      hash: md5
      md5: 2b1258e76f55f7bd8b231feace1a791e
      size: 3770
    - path: models/outlier_handler.joblib
      hash: md5
      md5: 2315cbf60ac0398b8d86db5737768854
      size: 523
    - path: models/power_transformer.joblib
      hash: md5
      md5: 50c7db48fb4ff61c27a635dcffd5dd9d
      size: 312
    - path: models/rare_category_grouper.joblib
      hash: md5
      md5: 43a6021b46cdcf7a8a3042f52111d998
      size: 2371
    - path: models/scaler.joblib
      hash: md5
      md5: 9358fc324ab4beaea02d401c8f669a56
      size: 378
    - path: models/simple_imputer.json
      hash: md5
      md5: 4a939e5d5a7cfb3346567524080f6b6d
      size: 219
  training_pipeline:
    cmd: python src/pipelines/training_pipeline.py train.parquet 
      validation.parquet
    deps:
    - path: data/gold_engineered_data/processed/train.parquet
      hash: md5
      md5: 5b530a739e4ed1e624cc2dac3829888e
      size: 961853
    - path: data/gold_engineered_data/processed/validation.parquet
      hash: md5
      md5: c247566a0d15ed3c1a52f5f77666fb79
      size: 331314
    - path: src/model_training/
      hash: md5
      md5: 09a8da420dddc0291524d70765d1ab4f.dir
      size: 4127
      nfiles: 2
    - path: src/pipelines/training_pipeline.py
      hash: md5
      md5: 8aa8126cd78851df6c67892150f08f40
      size: 8675
    - path: src/shared/
      hash: md5
      md5: 0ea1ec6c7a9c0232b6589aa7c9160825.dir
      size: 39960
      nfiles: 22
    params:
      params.yaml:
        mlflow_params:
          experiment_name: Flights_Price_Prediction
          run_name: test3-removed-multicollinearity
        training_pipeline:
          model_to_train: LinearRegression
          name: LinearRegression_v1
          drop_multicollinear_cols:
          - distance
          training_params:
            n_jobs: -1
